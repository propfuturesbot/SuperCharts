
> trading-backend@1.0.0 start
> node simple-backend.js

âœ… Found existing contracts file with 57 contracts
(node:79684) Warning: Accessing non-existent property 'lookupContractProductId' of module exports inside circular dependency
(Use `node --trace-warnings ...` to show where the warning was created)
ðŸš€ Backend running on http://localhost:8025
ðŸ“„ Contracts cached in: /Users/tejasvihegde/Documents/PropAutomation/SuperCharts/SuperCharts/trading-backend/tradableContracts.json
[AUTH] Saved authentication for tejashegde@gmail.com@thefuturesdesk
[AUTH] Saved authentication for tejashegde@gmail.com@thefuturesdesk
[AUTH] Loaded valid authentication for tejashegde@gmail.com@thefuturesdesk
[INFO] Placing bracket order: provider=thefuturesdesk, accountName=TFDXAP_508PA89, symbol=MNQ, action=BUY, stopLoss=15, takeProfit=20, quantity=1
[INFO] Placing bracket order: accountName=TFDXAP_508PA89, symbol=MNQ, orderType=BUY, quantity=1, stopLossPoints=15, takeProfitPoints=20
[INFO] Placing market order: provider=thefuturesdesk, accountName=TFDXAP_508PA89, symbol=MNQ, orderType=BUY, quantity=1
[DEBUG] Extracted symbolId from backend: F.US.MNQ
[INFO] Sending order request to https://userapi.thefuturesdesk.projectx.com/Order with payload: {
  accountId: 103075,
  symbolId: 'F.US.MNQ',
  type: 2,
  limitPrice: null,
  stopPrice: null,
  trailDistance: null,
  positionSize: 1,
  customTag: 'jeq5xcoc2mg5sasbe'
}
[INFO] Market order placed successfully: orderId=4645482
[INFO] Market order placed successfully, order ID: 4645482
[INFO] Retrieved accountId=103075
[DEBUG] Extracted symbolId from backend: F.US.MNQ
[INFO] Polling for position fill...
[DEBUG] Getting user ID from URL: https://userapi.thefuturesdesk.projectx.com/User
[DEBUG] Response status code: 200
[DEBUG] User data received: {
  userName: 'tejashegde@gmail.com',
  email: 'tejashegde@gmail.com',
  userId: 20296,
  firstName: 'Tejasvi',
  lastName: 'Hegde',
  hasSignedAgreements: false,
  onboardingRequired: false,
  onboardingState: 5,
  createdAt: '2025-06-20T19:50:28.412446+00:00',
  roles: []
}
[DEBUG] Extracted user ID: 20296
[DEBUG] Requesting positions from URL: https://userapi.thefuturesdesk.projectx.com/Position/all/user/20296
[DEBUG] Response status code for positions: 200
[DEBUG] Received 1 positions
[DEBUG] Found position: accountId=103075, symbolId=F.US.MNQ, averagePrice=24829.25, positionId=945555
[INFO] Position filled at price: 24829.25, position ID: 945555
[INFO] Order filled at price 24829.25, positionId=945555
[INFO] Calculated stop loss price: 24814.25, take profit price: 24849.25
[INFO] Sending editStopLoss request to https://userapi.thefuturesdesk.projectx.com/Order/editStopLossAccount
[INFO] Stop loss and take profit set successfully for position ID: 945555
[TUNNEL] Killed cloudflared processes using: pkill cloudflared
[TUNNEL] Killed cloudflared processes using: pkill cloudflared
[TUNNEL] Killed cloudflared processes using: pkill cloudflared
[TUNNEL] Starting cloudflared tunnel for http://localhost:3000 (Frontend Dashboard)
[TUNNEL] 2025-09-29T23:54:26Z INF Thank you for trying Cloudflare Tunnel. Doing so, without a Cloudflare account, is a quick way to experiment and try it out. However, be aware that these account-less Tunnels have no uptime guarantee, are subject to the Cloudflare Online Services Terms of Use (https://www.cloudflare.com/website-terms/), and Cloudflare reserves the right to investigate your use of Tunnels for violations of such terms. If you intend to use Tunnels in production you should use a pre-created named tunnel by following: https://developers.cloudflare.com/cloudflare-one/connections/connect-apps
2025-09-29T23:54:26Z INF Requesting new quick Tunnel on trycloudflare.com...
[TUNNEL] Starting cloudflared tunnel for http://localhost:3000 (Frontend Dashboard)
[TUNNEL] Stopping existing tunnel process
[TUNNEL] Process exited with code null
[TUNNEL] 2025-09-29T23:54:28Z INF Thank you for trying Cloudflare Tunnel. Doing so, without a Cloudflare account, is a quick way to experiment and try it out. However, be aware that these account-less Tunnels have no uptime guarantee, are subject to the Cloudflare Online Services Terms of Use (https://www.cloudflare.com/website-terms/), and Cloudflare reserves the right to investigate your use of Tunnels for violations of such terms. If you intend to use Tunnels in production you should use a pre-created named tunnel by following: https://developers.cloudflare.com/cloudflare-one/connections/connect-apps
2025-09-29T23:54:28Z INF Requesting new quick Tunnel on trycloudflare.com...
[TUNNEL] 2025-09-29T23:54:32Z INF +--------------------------------------------------------------------------------------------+
2025-09-29T23:54:32Z INF |  Your quick Tunnel has been created! Visit it at (it may take some time to be reachable):  |
2025-09-29T23:54:32Z INF |  https://writings-lined-personnel-blogging.trycloudflare.com                               |
[TUNNEL] Tunnel URL: https://writings-lined-personnel-blogging.trycloudflare.com
[TUNNEL] 2025-09-29T23:54:32Z INF +--------------------------------------------------------------------------------------------+
2025-09-29T23:54:32Z INF Cannot determine default configuration path. No file [config.yml config.yaml] in [~/.cloudflared ~/.cloudflare-warp ~/cloudflare-warp /etc/cloudflared /usr/local/etc/cloudflared]
2025-09-29T23:54:32Z INF Version 2025.5.0 (Checksum e0b495b62b2bc33544da6e319494494cf4092e489e7e649357f1ce878b92dde2)
2025-09-29T23:54:32Z INF GOOS: darwin, GOVersion: go1.22.5-devel-cf, GoArch: amd64
2025-09-29T23:54:32Z INF Settings: map[ha-connections:1 no-autoupdate:true protocol:quic url:http://localhost:3000]
2025-09-29T23:54:32Z INF cloudflared will not automatically update if installed by a package manager.
[TUNNEL] 2025-09-29T23:54:32Z INF Generated Connector ID: 4bc5381f-414b-4b6d-b594-8c3291cd78bd
[TUNNEL] 2025-09-29T23:54:32Z INF Initial protocol quic
[TUNNEL] 2025-09-29T23:54:32Z INF ICMP proxy will use 192.168.1.15 as source for IPv4
[TUNNEL] 2025-09-29T23:54:32Z INF ICMP proxy will use fe80::1026:dd51:71aa:e69e in zone en0 as source for IPv6
[TUNNEL] 2025-09-29T23:54:32Z INF Created ICMP proxy listening on 192.168.1.15:0
[TUNNEL] 2025-09-29T23:54:32Z INF ICMP proxy will use 192.168.1.15 as source for IPv4
[TUNNEL] 2025-09-29T23:54:32Z INF ICMP proxy will use fe80::1026:dd51:71aa:e69e in zone en0 as source for IPv6
[TUNNEL] 2025-09-29T23:54:32Z INF Starting metrics server on 127.0.0.1:20242/metrics
[TUNNEL] 2025-09-29T23:54:32Z INF Tunnel connection curve preferences: [CurveID(4588) CurveID(25497) CurveP256] connIndex=0 event=0 ip=198.41.192.57
[TUNNEL] 2025-09-29T23:54:32Z INF Registered tunnel connection connIndex=0 connection=8fea9f6e-21eb-4532-ba39-549a0f60208c event=0 ip=198.41.192.57 location=atl12 protocol=quic
[AUTH] Loaded valid authentication for tejashegde@gmail.com@thefuturesdesk
[INFO] Placing bracket order: accountName=TFDXAP_508PA89, symbol=MNQ, orderType=BUY, quantity=1, stopLossPoints=15, takeProfitPoints=20
[INFO] Placing market order: provider=thefuturesdesk, accountName=TFDXAP_508PA89, symbol=MNQ, orderType=BUY, quantity=1
[DEBUG] Extracted symbolId from backend: F.US.MNQ
[INFO] Sending order request to https://userapi.thefuturesdesk.projectx.com/Order with payload: {
  accountId: 103075,
  symbolId: 'F.US.MNQ',
  type: 2,
  limitPrice: null,
  stopPrice: null,
  trailDistance: null,
  positionSize: 1,
  customTag: 't7mhxaf7mmg5se5rp'
}
[INFO] Market order placed successfully: orderId=4645527
[INFO] Market order placed successfully, order ID: 4645527
[INFO] Retrieved accountId=103075
[DEBUG] Extracted symbolId from backend: F.US.MNQ
[INFO] Polling for position fill...
[DEBUG] Getting user ID from URL: https://userapi.thefuturesdesk.projectx.com/User
[DEBUG] Response status code: 200
[DEBUG] User data received: {
  userName: 'tejashegde@gmail.com',
  email: 'tejashegde@gmail.com',
  userId: 20296,
  firstName: 'Tejasvi',
  lastName: 'Hegde',
  hasSignedAgreements: false,
  onboardingRequired: false,
  onboardingState: 5,
  createdAt: '2025-06-20T19:50:28.412446+00:00',
  roles: []
}
[DEBUG] Extracted user ID: 20296
[DEBUG] Requesting positions from URL: https://userapi.thefuturesdesk.projectx.com/Position/all/user/20296
[DEBUG] Response status code for positions: 200
[DEBUG] Received 1 positions
[DEBUG] Found position: accountId=103075, symbolId=F.US.MNQ, averagePrice=24827, positionId=945567
[INFO] Position filled at price: 24827, position ID: 945567
[INFO] Order filled at price 24827, positionId=945567
[INFO] Calculated stop loss price: 24812, take profit price: 24847
[INFO] Sending editStopLoss request to https://userapi.thefuturesdesk.projectx.com/Order/editStopLossAccount
[INFO] Stop loss and take profit set successfully for position ID: 945567
[AUTH] Loaded valid authentication for tejashegde@gmail.com@thefuturesdesk
[INFO] Placing bracket order: accountName=TFDXAP_508PA89, symbol=MNQ, orderType=BUY, quantity=1, stopLossPoints=15, takeProfitPoints=20
[INFO] Placing market order: provider=thefuturesdesk, accountName=TFDXAP_508PA89, symbol=MNQ, orderType=BUY, quantity=1
[DEBUG] Extracted symbolId from backend: F.US.MNQ
[INFO] Sending order request to https://userapi.thefuturesdesk.projectx.com/Order with payload: {
  accountId: 103075,
  symbolId: 'F.US.MNQ',
  type: 2,
  limitPrice: null,
  stopPrice: null,
  trailDistance: null,
  positionSize: 1,
  customTag: 'jv43242f9mg5sec17'
}
[INFO] Market order placed successfully: orderId=4645533
[INFO] Market order placed successfully, order ID: 4645533
[INFO] Retrieved accountId=103075
[DEBUG] Extracted symbolId from backend: F.US.MNQ
[INFO] Polling for position fill...
[DEBUG] Getting user ID from URL: https://userapi.thefuturesdesk.projectx.com/User
[DEBUG] Response status code: 200
[DEBUG] User data received: {
  userName: 'tejashegde@gmail.com',
  email: 'tejashegde@gmail.com',
  userId: 20296,
  firstName: 'Tejasvi',
  lastName: 'Hegde',
  hasSignedAgreements: false,
  onboardingRequired: false,
  onboardingState: 5,
  createdAt: '2025-06-20T19:50:28.412446+00:00',
  roles: []
}
[DEBUG] Extracted user ID: 20296
[DEBUG] Requesting positions from URL: https://userapi.thefuturesdesk.projectx.com/Position/all/user/20296
[DEBUG] Response status code for positions: 200
[DEBUG] Received 1 positions
[DEBUG] Found position: accountId=103075, symbolId=F.US.MNQ, averagePrice=24826.5, positionId=945568
[INFO] Position filled at price: 24826.5, position ID: 945568
[INFO] Order filled at price 24826.5, positionId=945568
[INFO] Calculated stop loss price: 24811.5, take profit price: 24846.5
[INFO] Sending editStopLoss request to https://userapi.thefuturesdesk.projectx.com/Order/editStopLossAccount
[INFO] Stop loss and take profit set successfully for position ID: 945568
[AUTH] Loaded valid authentication for tejashegde@gmail.com@thefuturesdesk
[INFO] Placing market order with stop loss: accountName=TFDXAP_508PA89, orderType=BUY, symbol=MES, quantity=1, stopLossPoints=20
[INFO] Placing market order: provider=thefuturesdesk, accountName=TFDXAP_508PA89, symbol=MES, orderType=BUY, quantity=1
[DEBUG] Extracted symbolId from backend: F.US.MES
[INFO] Sending order request to https://userapi.thefuturesdesk.projectx.com/Order with payload: {
  accountId: 103075,
  symbolId: 'F.US.MES',
  type: 2,
  limitPrice: null,
  stopPrice: null,
  trailDistance: null,
  positionSize: 1,
  customTag: '7wnhkwatomg5sf3sa'
}
[INFO] Market order placed successfully: orderId=4645549
[INFO] Market order placed successfully, order ID: 4645549
[INFO] Retrieved accountId=103075
[DEBUG] Extracted symbolId from backend: F.US.MES
[INFO] Polling for position fill...
[DEBUG] Getting user ID from URL: https://userapi.thefuturesdesk.projectx.com/User
[DEBUG] Response status code: 200
[DEBUG] User data received: {
  userName: 'tejashegde@gmail.com',
  email: 'tejashegde@gmail.com',
  userId: 20296,
  firstName: 'Tejasvi',
  lastName: 'Hegde',
  hasSignedAgreements: false,
  onboardingRequired: false,
  onboardingState: 5,
  createdAt: '2025-06-20T19:50:28.412446+00:00',
  roles: []
}
[DEBUG] Extracted user ID: 20296
[DEBUG] Requesting positions from URL: https://userapi.thefuturesdesk.projectx.com/Position/all/user/20296
[DEBUG] Response status code for positions: 200
[DEBUG] Received 1 positions
[DEBUG] Found position: accountId=103075, symbolId=F.US.MES, averagePrice=6711.75, positionId=945571
[INFO] Position filled at price: 6711.75, position ID: 945571
[INFO] Order filled at price 6711.75, positionId=945571
[INFO] Calculated stop loss price: 6691.75
[INFO] Sending editStopLoss request to https://userapi.thefuturesdesk.projectx.com/Order/editStopLossAccount
[INFO] Stop loss set successfully for position ID: 945571
[AUTH] Loaded valid authentication for tejashegde@gmail.com@thefuturesdesk
[INFO] Placing trailing stop order: provider=thefuturesdesk, accountName=TFDXAP_508PA89, orderType=BUY, symbol=MNQ, quantity=1, trailDistancePoints=20
[DEBUG] Converted 20 points to 80 ticks for MNQ (tick_size: 0.25)
[INFO] Placing market order: provider=thefuturesdesk, accountName=TFDXAP_508PA89, symbol=MNQ, orderType=BUY, quantity=1
[DEBUG] Extracted symbolId from backend: F.US.MNQ
[INFO] Sending order request to https://userapi.thefuturesdesk.projectx.com/Order with payload: {
  accountId: 103075,
  symbolId: 'F.US.MNQ',
  type: 2,
  limitPrice: null,
  stopPrice: null,
  trailDistance: null,
  positionSize: 1,
  customTag: 'ichyb98idmg5sgfop'
}
[INFO] Market order placed successfully: orderId=4645569
[DEBUG] Extracted symbolId from backend: F.US.MNQ
[INFO] Trailing stop order placed successfully: orderId=4645570
[AUTH] Loaded valid authentication for tejashegde@gmail.com@thefuturesdesk
[INFO] Reversing position: provider=thefuturesdesk, accountName=TFDXAP_508PA89, symbol=MNQ
[DEBUG] Extracted symbolId from backend: F.US.MNQ
[INFO] Reverse position successful: true
[AUTH] Loaded valid authentication for tejashegde@gmail.com@thefuturesdesk
[INFO] Flattening all positions: provider=thefuturesdesk, accountName=TFDXAP_508PA89
[INFO] Flatten all positions successful
[AUTH] Loaded valid authentication for tejashegde@gmail.com@thefuturesdesk
[INFO] Closing all positions: provider=thefuturesdesk, accountName=TFDXAP_508PA89, symbol=MNQ
[DEBUG] Extracted symbolId from backend: F.US.MNQ
[INFO] Close positions successful
[TUNNEL] 2025-09-30T00:00:02Z INF Initiating graceful shutdown due to signal terminated ...
[TUNNEL] Killed cloudflared processes using: pkill cloudflared
[TUNNEL] 2025-09-30T00:00:02Z ERR Failed to serve tunnel connection error="context canceled" connIndex=0 event=0 ip=198.41.192.57
2025-09-30T00:00:02Z INF Retrying connection in up to 1s connIndex=0 event=0 ip=198.41.192.57
[TUNNEL] 2025-09-30T00:00:02Z ERR no more connections active and exiting
2025-09-30T00:00:02Z INF Tunnel server stopped
2025-09-30T00:00:02Z INF Metrics server stopped
[TUNNEL] Process exited with code 0
[TUNNEL] Killed cloudflared processes using: pkill cloudflared
